function Banner(e){function t(){var t=document.createDocumentFragment();a=e.map(function(e,n){var s=document.createElement("a");s.title=e.name,s.href=e.anchorHref,s.style.backgroundImage="url("+e.imageUrl+")",t.appendChild(s),console.log(s.offsetWidth);var i,r,h,m;return s.addEventListener("touchstart",function(e){i=e.touches[0].clientX},0),s.addEventListener("touchmove",function(e){u=l>o-1?0:l+1,h=e.touches[0].clientX-i,m=h>0,this.style.left=h+"px",m?a[d].style.left=h-c+"px":a[u].style.left=h+c+"px"},0),s.addEventListener("touchend",function(e){r=e.changedTouches[0].clientX,Math.abs(h)>c/2?this.classList.add(m?"ltr":"rtl"):this.classList.add("init")},0),s.addEventListener("animationend",function(){this.style.left=null,this.classList.remove("init")},0),s}),r.appendChild(t)}function n(){var t=document.createElement("div");t.className="indicator",i=e.map(function(e,n){var a=document.createElement("em");return a.appendChild(document.createTextNode(n+1)),t.appendChild(a),a.addEventListener("touchend",function(){d=l,l=n,s(),this.classList.add("current")},0),a}),i[0].classList.add("current"),r.appendChild(t)}function s(){a[d].classList.remove("current"),a[d].classList.add("previous"),a[l].classList.remove("previous"),a[l].classList.add("current"),i[d].classList.remove("current"),i[l].classList.remove("current")}var a,i,c,r=e.position,e=e.option,o=e.length,d=o-1,l=0,u=1;t(),c=a[0].offsetWidth,n()}var banner=document.querySelector(".banner");ajax({url:"http://www.ikindness.cn/api/test/get",success:function(e){new Banner({position:banner,option:e.data})}});